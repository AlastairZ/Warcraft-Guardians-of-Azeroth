defined_text = {
	use_first_valid = yes
	name = GetMarketCloseOpen

	text = {
		trigger = {
			NOT = { has_character_flag = market_open }
		}

		localisation_key = GetMarketOpen
	}
	text = {
		trigger = { has_character_flag = market_open }

		localisation_key = GetMarketClose
	}
}

defined_text = {
	name = GetMarketCloseOpenDesc

	text = {
		trigger = {
			NOT = { has_character_flag = market_open }
		}

		localisation_key = GetMarketOpenDescNormal
	}
	text = {
		trigger = {
			NOT = {
				has_character_flag = market_open
				any_artifact = {
					count = 1
				}
			}
		}

		localisation_key = GetMarketOpenDescNothing
	}
	text = {
		trigger = {
			NOT = {
				has_character_flag = market_open
				any_artifact = {
					count = 1
				}
			}
			is_dumb_trigger = yes
		}

		localisation_key = GetMarketOpenDescDumb
	}
	text = {
		trigger = {
			NOT = { has_character_flag = market_open }
			OR = {
				trait = lunatic
				trait = possessed
			}
		}

		localisation_key = GetMarketOpenDescCrazy
	}

	text = {
		trigger = { has_character_flag = market_open }

		localisation_key = GetMarketCloseDescNormal
	}
	text = {
		trigger = {
			has_character_flag = market_open
			NOT = {
				any_artifact = {
					count = 1
				}
				trait = lunatic
				trait = possessed
			}
		}

		localisation_key = GetMarketCloseDescNothing
	}
}

defined_text = { # Gets Craftsman job for employer events
	use_first_valid = yes
	name = GetCraftsmanJobForEmployer

	text = {
		trigger = { has_character_flag = bought_from_tailor }

		localisation_key = GetCraftsmanJobForEmployerTailor
	}
	text = {
		trigger = { has_character_flag = bought_from_blacksmith }

		localisation_key = GetCraftsmanJobForEmployerBlacksmith
	}
	text = {
		trigger = { has_character_flag = bought_from_enchanter }

		localisation_key = GetCraftsmanJobForEmployerEnchanter
	}
	text = {
		trigger = { has_character_flag = bought_from_alchemist }

		localisation_key = GetCraftsmanJobForEmployerAlchemist
	}
	text = {
		trigger = { has_character_flag = bought_from_jeweler }

		localisation_key = GetCraftsmanJobForEmployerJeweler
	}

	fallback_text = {
		localisation_key = GetCraftsmanJobCraftsman
	}
}

defined_text = { # Gets Craftsman job for craftsman modifier
	use_first_valid = yes
	name = GetCraftsmanJob

	text = {
		trigger = { has_character_flag = craftsman_is_tailor }

		localisation_key = GetCraftsmanJobTailor
	}
	text = {
		trigger = { has_character_flag = craftsman_is_blacksmith }

		localisation_key = GetCraftsmanJobBlacksmith
	}
	text = {
		trigger = { has_character_flag = craftsman_is_enchanter }

		localisation_key = GetCraftsmanJobEnchanter
	}
	text = {
		trigger = { has_character_flag = craftsman_is_alchemist }

		localisation_key = GetCraftsmanJobAlchemist
	}
	text = {
		trigger = { has_character_flag = craftsman_is_jeweler }

		localisation_key = GetCraftsmanJobJeweler
	}

	fallback_text = {
		localisation_key = GetCraftsmanJobCraftsman
	}
}

defined_text = { # Gets artifact name for market events
	use_first_valid = yes

	name = GetMarketArtifactName

	text = {
		trigger = { has_character_flag = bought_artifact_top_hat }

		localisation_key = GetMarketArtifactNameTopHat
	}
	text = {
		trigger = { has_character_flag = bought_artifact_rogue_dagger }

		localisation_key = GetMarketArtifactNameDagger
	}
	text = {
		trigger = { has_character_flag = bought_artifact_copper_ring }

		localisation_key = GetMarketArtifactNameRing
	}
	text = {
		trigger = { has_character_flag = bought_artifact_ruler_crown }

		localisation_key = GetMarketArtifactNameCrown
	}
	text = {
		trigger = { has_character_flag = bought_artifact_amulet }

		localisation_key = GetMarketArtifactNameAmulet
	}
	text = {
		trigger = { has_character_flag = bought_artifact_cloak }

		localisation_key = GetMarketArtifactNameCloak
	}

	fallback_text = {
		localisation_key = GetMarketArtifactNameArtifact
	}
}