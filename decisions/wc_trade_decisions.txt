###################################
#
# Warcraft Trade Decisions
# - Cipher
#
###################################

# Written by "Cipher"


decisions = {
	#Build a flagship desicion with kultiran Dockyard
	build_glorious_flagship = {
		  is_high_prio = yes # Will show an alert once decision is enabled
		  
		  ai_check_interval = 12 # Determines how seldom the AI checks whether they can and should do the decision, in months. By default 1 (every month).
		  
		potential = {
			any_trade_post = {
				trade_post_has_building = wc_kultiranDockyard
			}
			NOT = { has_character_flag = built_flagship }
		}
		 
		allow = {
			wealth = 350
		}
		 
		effect = {
			wealth = -350
			set_character_flag = built_flagship
			character_event = { id = wcbv.001 }
		}
		 
		 ai_will_do = {
			factor = 0
		}
	}
}

targetted_decisions = {
	#Gift a flagship to any nation with kultiran dockyard decision
	gift_flagship_decision = {
		is_high_prio = no

		filter = all
		ai_target_filter = independent_rulers
		ai_check_interval = 60

		ai = no
		only_playable = yes

		from_potential = {
			has_character_modifier = kultiran_flagship_mod
		}

		potential = {
			evil_public_religion_trigger = no
			NOT = { is_rival = FROM }
		}
		allow = {
			is_within_diplo_range = FROM
			NOT = { war = yes }
		}
		effect = {
			FROM = { remove_character_modifier = kultiran_flagship_mod }
			ROOT = { add_character_modifier = { name = kultiran_flagship_mod years = 5 } }
			FROM = { opinion = { modifier = gifted_ship who = ROOT years = 5 } }
			hidden_tooltip = { 
				ROOT = { letter_event = { id = wcbv.005 } }
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
		}
	}
	
}