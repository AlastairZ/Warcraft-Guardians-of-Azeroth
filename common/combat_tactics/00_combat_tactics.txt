### DukeJeans
### These are the sprite numbers:
### 1=CASTER 2=INFAN 3=AERIAL 4=CAVALRY 5=BOOT 6=ARCHER 7=SHELL 8=HOLY 9=CHARGE
### 10=SKULL 11=SHIELD

###### VANILLA TACTICS ######
# Must be first in file. This tactic will be set if anything goes wrong
no_tactic = {
	days = 1 # tactic lasts one day
	sprite = 11 # index of icon

	trigger = {
		always = no # never use unless set explicitly by code
	}
}

prepare_tactic = {
	days = 1
	sprite = 2
	group = defensive

	trigger = {
		phase = skirmish
		days = 15
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.1
			flank_has_leader = yes
			leader = {
				martial = 8
			}
		}
		modifier = {
			factor = 0.1
			flank_has_leader = yes
			leader = {
				martial = 12
			}
		}
		modifier = {
			factor = 0.1
			flank_has_leader = yes
			leader = {
				martial = 16
			}
		}
	}

	change_phase_to = melee
}

wait_tactic = {
	days = 1
	sprite = 2
	group = stand_fast

	trigger = {
		phase = melee
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 0.1
			flank_has_leader = yes
			leader = {
				martial = 8
			}
		}
		modifier = {
			factor = 0.1
			flank_has_leader = yes
			leader = {
				martial = 12
			}
		}
		modifier = {
			factor = 0.1
			flank_has_leader = yes
			leader = {
				martial = 16
			}
		}
	}
}

pursue_tactic = {
	days = 15
	sprite = 4
	group = charge

	trigger = {
		phase = pursue
	}

	mean_time_to_happen = {
		days = 10
	}
}

generic_skirmish_tactic = {
	days = 18 # tactic lasts one day
	sprite = 4 # index of icon
	group = skirmish

	trigger = {
		phase = skirmish
	}

	mean_time_to_happen = {
		days = 3
	}
}

no_siege_offense_tactic = {
	days = 1 # tactic lasts one day
	sprite = 1 # index of icon

	siege = attacker

	trigger = {
		always = no # never use unless set explicitly by code
	}
}

default_siege_offense_tactic = {
	days = 5
	sprite = 1

	siege = attacker

	trigger = {
		always = yes
	}

	mean_time_to_happen = {
		days = 10
	}
}

no_siege_defense_tactic = {
	days = 1 # tactic lasts one day
	sprite = 1 # index of icon
	siege = defender
	trigger = {
		always = no # never use unless set explicitly by code
	}
}

default_siege_defense_tactic = {
	days = 5
	sprite = 1

	siege = defender

	trigger = {
		always = yes
	}

	mean_time_to_happen = {
		days = 10
	}
}

flank_retreat_odds ={
	# MTTH range is 0-100, if flank morale is below MTTH, flank will retreat
	mean_time_to_happen = {
		days = 20
	}
}

flank_pursue_odds ={
	# MTTH range is 0-100, chance (in %) of pursuing a fleeing flank
	mean_time_to_happen = {
		days = 25
	}
}

###### END VANILLA TACTICS ######

###### WARCRAFT TACTICS ######
## GENERIC TACTICS ##
wc_organized_skirmish_tactic = {
	days = 18
	sprite = 6
	group = harass

	trigger = {
		phase = skirmish
		AND = {
			archers = 0.01
			light_cavalry = 0.01
			NOT = {
				archers = 0.4
			}
		}
	}

	mean_time_to_happen = {
		days = 2
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 8
			}
			AND = {
				archers = 0.1
				light_cavalry = 0.1
			}
		}
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			AND = {
				archers = 0.2
				light_cavalry = 0.1
			}
		}
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			AND = {
				archers = 0.2
				light_cavalry = 0.1
			}
		}
	}

	archers_offensive = 1.2
	light_cavalry_offensive = 0.6
	light_infantry_offensive = -1.2
	archmage_offensive = -1.2
	siege_machines_offensive = -1.2
	enemy = {
		group = swarm
		factor = 1
	}
}

wc_skirmish_tactic = {
	days = 18
	sprite = 6
	group = harass

	trigger = {
		phase = skirmish
		AND = {
			archers = 0.01
			light_cavalry = 0.01
		}
	}

	mean_time_to_happen = {
		days = 3
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 8
			}
			AND = {
				archers = 0.1
				light_cavalry = 0.1
			}
		}
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			AND = {
				archers = 0.2
				light_cavalry = 0.1
			}
		}
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			AND = {
				archers = 0.2
				light_cavalry = 0.1
			}
		}
	}

	archers_offensive = 0.8
	light_cavalry_offensive = 0.6
	light_infantry_offensive = -1.8
	archmage_offensive = -1.8
	siege_machines_offensive = -1.8
	enemy = {
		group = swarm
		factor = 1
	}
}

wc_aerial_raid_tactic = {
	days = 12
	sprite = 3
	group = harass

	trigger = {
		phase = skirmish
		pikemen = 0.01
	}

	mean_time_to_happen = {
		days = 2
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 8
			}
			pikemen = 0.2
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			pikemen = 0.3
		}
	}

	pikemen_offensive = 2
	archers_offensive = -1
	siege_machines_offensive = -1
	light_infantry_offensive = -1
	archmage_offensive = -1
	enemy = {
		group = swarm
		factor = 1
	}
}

wc_aerial_strikes_tactic = {
	days = 12
	sprite = 3
	group = volley

	trigger = {
		phase = skirmish
		pikemen = 0.01
	}

	mean_time_to_happen = {
		days = 2
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 8
			}
			pikemen = 0.1
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
				siege_machines = 0.1
		}
	}

	pikemen_offensive = 1
	siege_machines_offensive = 1
	archers_offensive = -1
	light_infantry_offensive = -1
	archmage_offensive = -1
	enemy = {
		group = harass
		factor = 1
	}
}

wc_volley_tactic = {
	days = 18
	sprite = 6
	group = volley

	trigger = {
		phase = skirmish
		archers = 0.01

		location = {
			NOT = { terrain = forest }
			NOT = { terrain = woods }
			NOT = { terrain = mountain }
			NOT = { terrain = impassable_mountains }
			NOT = { terrain = jungle }
			NOT = { terrain = marsh }
		}
	}

	mean_time_to_happen = {
		days = 4
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 8
			}
			light_troops = {
				who = archers
				value = 0.1
			}
		}
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			light_troops = {
				who = archers
				value = 0.2
			}
		}
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			light_troops = {
				who = archers
				value = 0.3
			}
		}
	}

	archers_offensive = 2
	light_infantry_offensive = 0.5
	archmage_offensive = 0.5
	pikemen_offensive = -1.5
	enemy = {
		group = harass
		factor = 1
	}
}

wc_magic_volley_tactic = {
	days = 12
	sprite = 1
	group = volley

	trigger = {
		phase = skirmish
		OR = {
			light_infantry = 0.01
			archmage = 0.01
		}
		location = {
			NOT = { terrain = forest }
			NOT = { terrain = woods }
			NOT = { terrain = jungle }
		}
	}

	mean_time_to_happen = {
		days = 3
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 8
			}
			OR = {
				light_troops = {
					who = light_infantry
					value = 0.1
				}
				light_troops = {
					who = archmage
					value = 0.1
				}
			}
		}
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			OR = {
				light_troops = {
					who = light_infantry
					value = 0.2
				}
				light_troops = {
					who = archmage
					value = 0.2
				}
			}
		}
		modifier = {
			factor = 1.5
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			OR = {
				light_troops = {
					who = light_infantry
					value = 0.3
				}
				light_troops = {
					who = archmage
					value = 0.3
				}
			}
		}
	}

	light_infantry_offensive = 2
	archmage_offensive = 2
	archers_offensive = 0.5
	pikemen_offensive = -1.5
	enemy = {
		group = harrass
		factor = 1
	}
}

wc_bombardment_tactic = {
	days = 18
	sprite = 7
	group = volley

	trigger = {
		phase = skirmish
		siege_machines = 0.01
	}

	mean_time_to_happen = {
		days = 3
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 8
			}
			siege_machines = 0.05
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			siege_machines = 0.1
		}
	}

	siege_machines_offensive = 2.5
	archers_offensive = -1.5
	light_infantry_offensive = -1.5
	archmage_offensive = -1.5
	pikemen_offensive = -1.5
	enemy = {
		group = harrass
		factor = 1
	}
}

wc_shield_wall_tactic = {
	days = 12
	sprite = 2
	group = defensive

	trigger = {
		phase = skirmish
		OR = {
			heavy_infantry = 0.2
			heavy_cavalry = 0.2
		}
		archers = 0.01
	}

	mean_time_to_happen = {
		days = 2
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			OR = {
				heavy_infantry = 0.3
				heavy_cavalry = 0.3
			}
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			OR = {
				heavy_infantry = 0.3
				heavy_cavalry = 0.3
			}
		}
	}

	heavy_infantry_defensive = 2
	heavy_cavalry_defensive = 0.5
	archers_offensive = 0.6
	light_cavalry_defensive = -0.5
}

wc_find_cover_tactic = {
	days = 12
	sprite = 2
	group = defensive

	trigger = {
		phase = skirmish
		OR = {
			heavy_infantry = 0.2
			heavy_cavalry = 0.2
		}
	}

	mean_time_to_happen = {
		days = 2
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			NOT = {
				archers = 0.3
			}
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			NOT = {
				archers = 0.2
			}
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			NOT = {
				archers = 0.1
			}
		}
	}

	heavy_infantry_defensive = 3
	archers_defensive = 3
	light_infantry_defensive = 3
	archmage_defensive = 3
	heavy_infantry_offensive = -1
	archers_offensive = -1
	light_infantry_offensive = -1
	archmage_offensive = -1
	light_cavalry_defensive = -1
	pikemen_defensive = -1
	siege_machines_defensive = -2
}

wc_charge_tactic = {
	days = 8
	sprite = 9
	group = charge

	trigger = {
		phase = skirmish
		days = 10
		is_flanking = no
	}

	mean_time_to_happen = {
		days = 10
		modifier = {
			factor = 5
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			light_cavalry = 0.1
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_infantry = 0.1
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			NOR = {
				large_cavalry = 0.05
				heavy_cavalry = 0.05
			}
		}
	}

	change_phase_to = melee

	light_cavalry_offensive = 3
	heavy_infantry_offensive = 1
	elite_infantry_offensive = 1.5
}

wc_crushing_charge_tactic = {
	days = 6
	sprite = 9
	group = charge

	trigger = {
		phase = skirmish
		days = 10
		is_flanking = no
		OR = {
			large_cavalry = 0.01
			heavy_cavalry = 0.01
    }
	}

	mean_time_to_happen = {
		days = 2
		modifier = {
			factor = 5
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			large_cavalry = 0.1
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_cavalry = 0.1
		}
		modifier = {
			factor = 25
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			NOR = {
				heavy_infantry = 0.4
				light_cavalry = 0.4
			}
		}
	}

	change_phase_to = melee

	large_cavalry_offensive = 3
	heavy_cavalry_offensive = 1
	elite_infantry_offensive = 1.5
}

wc_undefended_charge_on_flank_tactic = {
	days = 2
	sprite = 9
	group = charge

	trigger = {
		phase = skirmish
		days = 3
		is_flanking = no
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 100
			enemy = {
				archers = 0.6
			}
		}
	}

	change_phase_to = melee
}

wc_spearhead_tactic = {
	days = 6
	sprite = 9
	group = charge

	trigger = {
		phase = skirmish
		days = 10
		is_flanking = no
	}

	mean_time_to_happen = {
		days = 2
		modifier = {
			factor = 5
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			elite_infantry = 0.05
		}
		modifier = {
			factor = 5
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			enemy = {
				OR = {
					archers = 0.6
					heavy_infantry = 0.6
					light_infantry = 0.6
				}
			}
		}
	}

	change_phase_to = melee

	light_cavalry_offensive = 2
	heavy_infantry_offensive = 2
	large_cavalry_offensive = 2
	heavy_cavalry_offensive = 2
	elite_infantry_offensive = 3.5
	enemy = {
		group = defensive
		factor = 1
	}
}

wc_advance_tactic = {
	days = 18
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		heavy_infantry = 0.01
	}

	mean_time_to_happen = {
		days = 3
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_infantry = 0.1
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_infantry = 0.2
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_infantry = 0.3
		}
	}

	heavy_infantry_offensive = 3
	light_cavalry_offensive = -1.5
	heavy_cavalry_offensive = -1
	enemy = {
		group = standfast
		factor = 3
	}
}

wc_push_tactic = {
	days = 18
	sprite = 2
	group = advance

	trigger = {
		phase = melee
		AND = {
			heavy_infantry = 0.01
			heavy_cavalry = 0.01
		}
	}

	mean_time_to_happen = {
		days = 3
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_cavalry = 0.1
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_cavalry = 0.2
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
				has_trait = strong
			}
		}
	}

	heavy_infantry_offensive = 2
	light_cavalry_offensive = -1.5
	heavy_cavalry_offensive = 3
	heavy_infantry_defensive = -0.5
	heavy_cavalry_defensive = -0.5
	enemy = {
		group = standfast
		factor = 3
	}
}

wc_pike_wall_tactic = {
	days = 18
	sprite = 2
	group = standfast

	trigger = {
		phase = melee
		days = 10
		heavy_infantry = 0.01
	}

	mean_time_to_happen = {
		days = 2
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_infantry = 0.1
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_infantry = 0.2
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
				has_trait = defensive_leader
			}
		}
	}

	heavy_infantry_offensive = 2
	light_cavalry_offensive = -1.5
	heavy_cavalry_offensive = -1.5
	heavy_infantry_defensive = 1
	enemy = {
		group = charge
		factor = 3
	}
}

wc_barrier_tactic = {
	days = 18
	sprite = 1
	group = standfast

	trigger = {
		phase = melee
		heavy_infantry = 0.01
		OR = {
			light_infantry = 0.01
			archmage = 0.01
		}
	}

	mean_time_to_happen = {
		days = 2
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 8
			}
			heavy_infantry = 0.05
			OR = {
				light_infantry = 0.05
				archmage = 0.05
			}
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			heavy_infantry = 0.1
			OR = {
				light_infantry = 0.1
				archmage = 0.1
			}
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			heavy_infantry = 0.15
			OR = {
				light_infantry = 0.15
				archmage = 0.15
			}
		}
	}

	heavy_infantry_defensive = 2
	heavy_infantry_offensive = 0.5
	light_infantry_defensive = 3
	archmage_defensive = 3
	enemy = {
		group = charge
		factor = 3
	}
}

wc_overwhelm_tactic = {
	days = 18
	sprite = 2
	group = standfast

	trigger = {
		phase = melee
		heavy_infantry = 0.01
		OR = {
			animals = 0.01
			thralls = 0.01
			undead = 0.01
			swarm = 0.01
		}
	}

	mean_time_to_happen = {
		days = 3
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 8
			}
			OR = {
				animals = 0.1
				thralls = 0.1
				undead = 0.1
				swarm = 0.1
			}
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 12
			}
			OR = {
				animals = 0.1
				thralls = 0.1
				undead = 0.1
				swarm = 0.1
			}
		}
		modifier = {
			factor = 3
			flank_has_leader = yes
			leader = {
				martial = 16
			}
			OR = {
				animals = 0.1
				thralls = 0.1
				undead = 0.1
				swarm = 0.1
			}
		}
	}

	heavy_infantry_offensive = 0.5
	heavy_infantry_defensive = -1.5
	thralls_offensive = 3
	undead_offensive = 5
	swarm_offensive = 5
	animals_offensive = 5
	enemy = {
		group = advance
		factor = 3
	}
}
