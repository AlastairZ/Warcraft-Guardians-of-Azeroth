# IMPORTANT! Trigger from  MNM.10011 that fires joining chain if you're interested in society
# When add new society, change join_interesting_society_effect
is_interested_in_joining_trigger = {
	OR = {
		# Warcraft
		
		interested_in_society = secret_religious_cult

		# Warcraft
		interested_in_society = shadow_council
		interested_in_society = cult_of_the_damned
		interested_in_society = twilights_hammer_cult
	}
}

is_startup_member_trigger = {
	ai = yes
	
	controls_religion = no
	holy_order = no
	mercenary = no
	NOT = { higher_tier_than = DUKE }
}
# Blocks recruit decision
from_recruit_block_trigger = {
	custom_tooltip = {
		text = recruit_block_tooltip
		trigger_if = {
			limit = { FROM = { society_member_of = cult_of_the_damned } }
			OR = {
				NOT = { has_character_flag = cult_of_the_damned_attempted_recruitment }
				interested_in_society = cult_of_the_damned
			}
		}
		trigger_else_if = {
			limit = { FROM = { society_member_of = shadow_council  } }
			OR = {
				NOT = { has_character_flag = shadow_council_attempted_recruitment }
				interested_in_society = shadow_council
			}
		}
		trigger_else = {
			OR = {
				NOT = { has_character_flag = twilights_hammer_cult_attempted_recruitment }
				interested_in_society = twilights_hammer_cult
			}
		}
		
		has_society_recruitment_flags_trigger = no
	}
}
has_society_recruitment_flags_trigger = {
	OR = {
		has_character_flag = being_recruited_by_cult_of_the_damned
		has_character_flag = being_recruited_by_shadow_council
		has_character_flag = being_recruited_by_twilights_hammer_cult
	}
}

# _preferences triggers mean that character prefers to join this society
has_common_dark_cult_preferences = {
	OR = {
		evil_true_religion_trigger = yes
		has_impious_trait_trigger = yes
		has_unpleasant_trait_trigger = yes
		trait = drunkard
		trait = lunatic
	}
}

# _prerequisites triggers mean that character can join this society
has_common_society_prerequisites = {
	is_untouchable_trigger = no
	has_invader_title_trigger = no
	
	is_adult = yes
	is_incapable = no
	prisoner = no
	is_inaccessible_trigger = no
	
	is_humanoid_trigger = yes
	
	hidden_trigger = {
		NOT = { has_character_flag = society_join_block }
	}
}
has_common_dark_cult_prerequisites = {
	has_common_society_prerequisites = yes

	has_common_dark_cult_preferences = yes
}
has_cult_of_the_damned_prerequisites = {
	has_common_dark_cult_prerequisites = yes
	
	trigger_if = {
		limit = { NOT = { society_member_of = cult_of_the_damned } }
		is_in_society = no
		OR = {
			AND = {
				NOT = { government = tribal_government }
				is_nomadic = no
			}
			true_religion_associated_with_cult_of_the_damned_trigger = yes
			true_religion_group = necromancy_group
		}
	}
	
	NOR = {
		true_religion = orcish_fel
		true_religion = burning_legion_religion
		true_religion = old_gods_worship
	}
}
has_shadow_council_prerequisites = {
	has_common_dark_cult_prerequisites = yes
	
	trigger_if = {
		limit = { NOT = { society_member_of = shadow_council } }
		is_in_society = no
		OR = {
			AND = {
				NOT = { government = tribal_government }
				is_nomadic = no
			}
			true_religion_associated_with_shadow_council_trigger = yes
			true_religion_group = fel_group
		}
	}
	
	NOR = {
		true_religion = death_god
		true_religion = old_gods_worship
	}
}
has_twilights_hammer_cult_prerequisites = {
	has_common_dark_cult_prerequisites = yes
	
	trigger_if = {
		limit = { NOT = { society_member_of = twilights_hammer_cult } }
		is_in_society = no
		OR = {
			AND = {
				NOT = { government = tribal_government }
				is_nomadic = no
			}
			true_religion_associated_with_twilights_hammer_cult_trigger = yes
			true_religion_group = void_group
		}
	}
	
	NOR = {
		true_religion = death_god
		true_religion = orcish_fel
		true_religion = burning_legion_religion
	}
}