# Effects to join this society
join_society_cult_of_the_damned_effect = {
	if = {
		limit = { NOT = { true_religion = death_god } }
		if = {
			limit = {
				OR = {
					independent = yes
					liege = { NOT = { religion = death_god } }
				}
			}
			set_secret_religion = death_god
		}
		if = {
			limit = {
				independent = no
				liege = { religion = death_god }
			}
			if = { limit = { has_secret_religion = yes } clear_secret_religion = yes }
			religion = death_god
		}
	}
	join_society = cult_of_the_damned
}
join_society_shadow_council_effect = {
	if = {
		limit = {
			NOR = {
				true_religion = orcish_fel
				true_religion = burning_legion_religion
			}
		}
		if = {
			limit = {
				OR = {
					independent = yes
					liege = {
						NOR = {
							religion = orcish_fel
							religion = burning_legion_religion
						}
					}
				}
			}
			set_secret_religion = burning_legion_religion
		}
		if = {
			limit = {
				independent = no
				liege = { religion = orcish_fel }
			}
			if = { limit = { has_secret_religion = yes } clear_secret_religion = yes }
			religion = orcish_fel
		}
		if = {
			limit = {
				independent = no
				liege = { religion = burning_legion_religion }
			}
			if = { limit = { has_secret_religion = yes } clear_secret_religion = yes }
			religion = burning_legion_religion
		}
	}
	join_society = shadow_council
}
join_society_twilights_hammer_cult_effect = {
	if = {
		limit = { NOT = { true_religion = old_gods_worship } }
		if = {
			limit = {
				OR = {
					independent = yes
					liege = { NOT = { religion = old_gods_worship } }
				}
			}
			set_secret_religion = old_gods_worship
		}
		if = {
			limit = {
				independent = no
				liege = { religion = old_gods_worship }
			}
			if = { limit = { has_secret_religion = yes } clear_secret_religion = yes }
			religion = old_gods_worship
		}
	}
	join_society = twilights_hammer_cult
}
# Join society based on being_recruited_by_ flag
join_society_flag_effect = {
	trigger_switch = {
		on_trigger = has_character_flag
		being_recruited_by_cult_of_the_damned = { join_society_cult_of_the_damned_effect = yes }
		being_recruited_by_shadow_council = { join_society_shadow_council_effect = yes }
		being_recruited_by_twilights_hammer_cult = { join_society_twilights_hammer_cult_effect = yes }
	}
}
# Join ROOT's society
join_society_root_effect = {
	if = {
		limit = { ROOT = { society_member_of = cult_of_the_damned } }
		join_society_cult_of_the_damned_effect = yes
	}
	else_if = {
		limit = { ROOT = { society_member_of = shadow_council } }
		join_society_shadow_council_effect = yes
	}
	else_if = {
		limit = { ROOT = { society_member_of = twilights_hammer_cult } }
		join_society_twilights_hammer_cult_effect = yes
	}
}

# Clear society recruitment flags
clr_all_society_recruitment_flags_effect = {
	clr_character_flag = being_recruited_by_cult_of_the_damned
	clr_character_flag = being_recruited_by_shadow_council
	clr_character_flag = being_recruited_by_twilights_hammer_cult
}	