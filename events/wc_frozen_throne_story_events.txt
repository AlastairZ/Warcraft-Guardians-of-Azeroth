namespace = WCTFT

### Plaguelands Civil War ###
# Ping event
province_event = {
	id = WCTFT.99

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		start_date = 605.6.6
		NOT = { has_global_flag = plaguelands_civil_war_ongoing }
	}

	immediate = {
		set_global_flag = plaguelands_civil_war_ongoing
		d_lordamere = {
			holder_scope = { narrative_event = { id = WCTFT.100 } }
		}
	}
}

# Notifies the world of the ongoing civil war, Garithos can choose his path of reclamation
narrative_event = {
	id = WCTFT.100
	title = EVTTITLE_WCTFT_100
	desc = EVTDESC_WCTFT_100
	picture = GFX_evt_scourge_march
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes

	major = yes
	major_trigger = {
		ai = no
	}
	show_root = yes

	option = { #To the strongest!
		trigger = { character = ROOT }
		k_lordaeron = {
			if = {
				limit = { has_holder = yes }
				holder_scope = {
					set_character_flag = event_war_exception_flag
					reverse_unsafe_war = {
						target = ROOT
						casus_belli = invasion
						thirdparty_title = PREV
					}
				}
			}
		}
		prestige = 500
		piety = -250
		name = EVTOPTA_WCTFT_100
		ai_chance = {
			factor = 0
			modifier = {
				factor = 2
				trait = ambitious
			}
		}
	}

	option = { #To the rightful heir!
		trigger = { character = ROOT }
		k_lordaeron = {
			if = {
				limit = { has_holder = yes }
				holder_scope = {
					set_character_flag = event_war_exception_flag
					reverse_unsafe_war = {
						target = c_60004
						casus_belli = other_claim
						thirdparty = ROOT
						thirdparty_title = PREV
					}
				}
			}
		}
		prestige = 250
		name = EVTOPTB_WCTFT_100
		ai_chance = {
			factor = 1
		}
	}
	
	option = { #Scourge reacts
		trigger = {
			NOT = { character = ROOT }
			religion = death_god
		}
		name = EVTOPTC_WCTFT_100
	}
	
	option = { #Forsaken react
		trigger = {
			NOT = { character = ROOT }
			religion = forsaken_cult
		}
		name = EVTOPTD_WCTFT_100
	}
	
	option = { #Humans react
		trigger = {
			NOT = { 
				character = ROOT
				religion = death_god
				religion = forsaken_cult
			}
			culture_group = human_group
		}
		name = EVTOPTE_WCTFT_100
	}
	
	option = { #Legion reacts
		trigger = {
			NOT = { character = ROOT }
			religion = burning_legion_religion
		}
		name = EVTOPTF_WCTFT_100
	}
	
	option = { #Who cares
		trigger = {
			NOT = { 
				character = ROOT
				religion = death_god
				religion = forsaken_cult
				religion = burning_legion_religion
				culture_group = human_group
			}
		}
		name = EVTOPTG_WCTFT_100
	}
}

# Resistance Calia Path: Garithos victorious, Calia installed
narrative_event = {
	id = WCTFT.110
	title = EVTTITLE_WCTFT_110
	desc = EVTDESC_WCTFT_110
	picture = GFX_evt_stormwind_champion
	border = GFX_event_narrative_frame_war

	is_triggered_only = yes
	
	major = yes
	major_trigger = {
		ai = no
	}
	show_root = yes

	immediate = {
		clr_global_flag = plaguelands_civil_war_ongoing
		
		#Add Calia to faction
		event_target:target_calia = { join_alliance_faction_effect = yes }
		
		#Vassalize the Grand Marshal
		event_target:target_garithos = {
			set_defacto_liege = event_target:target_calia
		}
		
		#Give nicknames
		event_target:target_calia = {
			give_nickname = nick_the_deliverer
		}
		event_target:target_garithos = {
			give_nickname = nick_the_liberator
			#Garithos gains liberator bloodline [TODO]
		}
		
		#Ping the Silver Hand leader [TODO]
	}

	option = { #A new hope for Lordaeron
		trigger = {
			religion = holy_light
		}
		name = EVTOPTA_WCTFT_110
	}
	
	option = { #She won't rule for long
		trigger = {
			OR = {
				religion = death_god
				religion = forsaken_cult
				religion = burning_legion_religion
			}
		}
		name = EVTOPTB_WCTFT_110
	}
	
	option = { #At least she can be reasoned with
		trigger = {
			culture = blood_elf
		}
		name = EVTOPTC_WCTFT_110
	}

	option = { #Pah!
		trigger = {
			NOT = { 
				religion = death_god
				religion = forsaken_cult
				religion = burning_legion_religion
				religion = holy_light
				culture = blood_elf
			}
		}
		name = EVTOPTD_WCTFT_110
	}
}

### Old Hatreds ###

### Thalassian Regency ###