#######################################
## Written By: DukeJeans             ##
## Created on: 2/1/2019              ##
##                                   ##
## WCBAT 1-99,000                    ##
#######################################

namespace = WCBAT

# Random tombola that gives mod traits if you have focus_war
character_event = {
	id = WCBAT.50
	desc = EVTDESC96500
	picture = GFX_evt_battle
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		is_alive = yes
		
		has_focus = focus_war
		can_have_more_leadership_traits = yes
	}
	
	weight_multiplier = {
		factor = 1
		modifier = {
			factor = 1.25
			trait = misguided_warrior
		}
		modifier = {
			factor = 1.5
			trait = tough_soldier
		}
		modifier = {
			factor = 2.0
			trait = skilled_tactician
		}
		modifier = {
			factor = 3.0
			trait = brilliant_strategist
		}
		modifier = {
			factor = 0.1
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.5
			NOT = { martial = 8 }
		}
		modifier = {
			factor = 2.0
			NOT = { martial = 12 }
		}
		modifier = {
			factor = 2.0
			has_character_modifier = adept_of_strategy
		}
		modifier = {
			factor = 3.0
			trait = strategist
		}
		modifier = {
			factor = 0.25
			leader_traits = 1
		}
	}
	
	immediate = {
		random_list = {
			# Adds marksman_captain_leader, aerial_raider_leader, artillery_engineer_leader
			10 = { character_event = { id = WCBAT.120 } }
			# Adds archmagus_leader
			100 = {
				trigger = {
					allows_archmagus_leader = yes
				}
				character_event = { id = WCBAT.100 }
			}
			# Adds offensive_caster_leader, defensive_caster_leader, defiler_leader, warpriest_leader
			100 = {
				trigger = {
					allows_spell_specialization = yes
					NOT = { has_caster_leader_archetype = yes }
				}
				character_event = { id = WCBAT.110 }
			}
		}
	}
}

# Adds archmagus_leader
character_event = {
	id = WCBAT.100
	title = EVTTITLE_WCBAT_100
	desc = EVTDESC_WCBAT_100
	picture = GFX_evt_mage_fire
	border = GFX_event_normal_frame_war
	sound = win_battle

	is_triggered_only = yes

	trigger = {
		is_alive = yes
		
		can_have_more_leadership_traits = yes
	}

	immediate = {
		# They are fired before event - Your Zuzu
		# disallow_new_battle_events_effect = yes
		# battle_commander_counter_positive_effect = yes
	}

	option = {
		name = EVTOPT_WCBAT_100

		add_trait = archmagus_leader
	}
	
	option = {
		name = EVTOPTE_WOL_11301		# No, I seek another area of expertise...
	}
}

# Adds offensive_caster_leader, defensive_caster_leader, defiler_leader, warpriest_leader
character_event = {
	id = WCBAT.110
	title = EVTTITLE_WCBAT_110
	desc = EVTDESC_WCBAT_110
	picture = GFX_evt_antonidas
	border = GFX_event_normal_frame_war
	sound = win_battle

	is_triggered_only = yes

	trigger = {
		is_alive = yes
		
		can_have_more_leadership_traits = yes
	}

	immediate = {
		# They are fired before event - Your Zuzu
		# disallow_new_battle_events_effect = yes
		# battle_commander_counter_positive_effect = yes
	}

	option = {
		name = EVTOPT1_WCBAT_110
		trigger = {
			allows_offensive_caster_leader = yes
		}
		add_trait = offensive_caster_leader
	}
	option = {
		name = EVTOPT2_WCBAT_110
		trigger = {
			allows_defensive_caster_leader = yes
		}
		add_trait = defensive_caster_leader
	}
	option = {
		name = EVTOPT3_WCBAT_110
		trigger = {
			allows_defiler_leader = yes
		}
		add_trait = defiler_leader
	}
	option = {
		name = EVTOPT4_WCBAT_110
		trigger = {
			allows_warpriest_leader = yes
		}
		add_trait = warpriest_leader
	}
	
	option = {
		name = EVTOPTE_WOL_11301		# No, I seek another area of expertise...
	}
}

# Adds marksman_captain_leader, aerial_raider_leader, artillery_engineer_leader
character_event = {
	id = WCBAT.120
	desc = EVTDESC96500		# This descrpition sounds good
	picture = GFX_evt_battle
	border = GFX_event_normal_frame_war
	sound = win_battle

	is_triggered_only = yes

	trigger = {
		can_have_more_leadership_traits = yes
		is_alive = yes
	}

	immediate = {
		# They are fired before event - Your Zuzu
		# disallow_new_battle_events_effect = yes
		# battle_commander_counter_positive_effect = yes
	}

	option = {
		name = MARKSMAN_PHRASE
		trigger = {
			NOT = { trait = marksman_captain_leader }
		}
		add_trait = marksman_captain_leader
	}
	option = {
		name = AERIAL_PHRASE
		trigger = {
			NOT = { trait = aerial_raider_leader }
		}
		add_trait = aerial_raider_leader
	}
	option = {
		name = ARTILLERY_PHRASE
		trigger = {
			NOT = { trait = artillery_engineer_leader }
		}
		add_trait = artillery_engineer_leader
	}
	
	option = {
		name = EVTOPTE_WOL_11301		# No, I seek another area of expertise...
	}
}
