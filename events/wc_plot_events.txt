namespace = WCPE

character_event = {
	id = WCPE.1
	picture = GFX_evt_demonhunter_elf
	desc = EVTDESC_WCPE.1
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes
	
	trigger = {
		plot_target_char = {
			is_alive = yes
		}
	}
	
	immediate = {
		plot_target_char = {
			save_event_target_as = target_demon
		}
	}


	trigger = {
		prisoner = no
		NOT = { is_completely_incapable_trigger= yes }
		is_demon_hunter_class_trigger = yes
	}

	option = {
		name = EVTOPTA_WCPE.1
		character_event = { id = WCPE.2 days = 30 }
	}
	option = {
		name = EVTOPTB_WCPE.1
		character_event = { id = WCPE.1 days = 30 }
	}
}
#enter the lair
character_event = {
	id = WCPE.2
	picture = GFX_evt_demonhunter_elf
	desc = EVTDESC_WCPE.2
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		prisoner = no
		NOT = { is_completely_incapable_trigger= yes }
		is_demon_hunter_class_trigger = yes
		event_target:target_demon = { is_alive = yes}
	}

	option = {
		name = EVTOPTA_WCPE.2
	}
	option = {
		name = EVTOPTB_WCPE.2
		trigger = {
			trait = deceitful
			any_plot_backer = {
				trait = deceitful
			}
		}
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	option = {
		name = EVTOPTC_WCPE.2
		trigger = {
			OR ={
				trait = strong
				trait = robust
				any_plot_backer = {
					OR = {
						trait = strong
						trait = robust
					}
				}
			}
		}
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	option = {
		name = EVTOPTD_WCPE.2
		trigger = { num_of_plot_backers = 1 }
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
			# event_target:target_demon = {
				
			# }
		}
	}
	after = {
		character_event = { id = WCPE.3 days = 7 }
	}
}
#guards
character_event = {
	id = WCPE.3
	picture = GFX_evt_demonhunter_elf
	desc = EVTDESC_WCPE.3
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		prisoner = no
		NOT = { is_completely_incapable_trigger= yes }
		is_demon_hunter_class_trigger = yes
		event_target:target_demon = { is_alive = yes}
	}

	option = {
		name = EVTOPTA_WCPE.3
	}
	option = {
		name = EVTOPTB_WCPE.3
		trigger = {
			trait = gregarious
			any_plot_backer = {
				trait = gregarious
			}
		}
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	option = {
		name = EVTOPTC_WCPE.3
		trigger = {
			OR ={
				trait = impaler
				trait = wroth
				any_plot_backer = {
					OR = {
						trait = impaler
						trait = wroth
					}
				}
			}
		}
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	option = {
		name = EVTOPTD_WCPE.3
		trigger = { num_of_plot_backers = 1 }
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	after = {
		character_event = { id = WCPE.4 days = 7 }
	}
}
#finding the demon
character_event = {
	id = WCPE.4
	picture = GFX_evt_demonhunter_elf
	desc = EVTDESC_WCPE.4
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		prisoner = no
		NOT = { is_completely_incapable_trigger= yes }
		is_demon_hunter_class_trigger = yes
		event_target:target_demon = { is_alive = yes}
	}

	option = {
		name = EVTOPTA_WCPE.4
	}
	option = {
		name = EVTOPTB_WCPE.4
		trigger = {
			trait = paranoid
			any_plot_backer = {
				trait = paranoid
			}
		}
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	option = {
		name = EVTOPTC_WCPE.4
		trigger = {
			OR ={
				trait = shrewd
				trait = quick
				trait = genius
				any_plot_backer = {
					OR = {
						trait = shrewd
						trait = quick
						trait = genius
					}
				}
			}
		}
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	option = {
		name = EVTOPTD_WCPE.4
		trigger = { num_of_plot_backers = 1 }
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	after = {
		character_event = { id = WCPE.5 days = 7 }
	}
}
# method of attack
character_event = {
	id = WCPE.5
	picture = GFX_evt_demonhunter_elf
	desc = EVTDESC_WCPE.5
	border = GFX_event_normal_frame_religion

	is_triggered_only = yes

	trigger = {
		prisoner = no
		NOT = { is_completely_incapable_trigger= yes }
		is_demon_hunter_class_trigger = yes
		event_target:target_demon = { is_alive = yes}
	}

	option = {
		name = EVTOPTA_WCPE.5
	}
	option = {
		name = EVTOPTB_WCPE.5
		trigger = {
			trait = brave
			any_plot_backer = {
				trait = brave
			}
		}
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	option = {
		name = EVTOPTC_WCPE.5
		trigger = {
			OR ={
				trait = diligent
				trait = strategist
				any_plot_backer = {
					OR = {
						trait = diligent
						trait = strategist
					}
				}
			}
		}
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	option = {
		name = EVTOPTD_WCPE.5
		trigger = { num_of_plot_backers = 1 }
		hidden_effect = {
			set_character_flag = demon_hunt_prepared
			any_plot_backer = {
				set_character_flag = demon_hunt_prepared
			}
		}
	}
	after = {
		#character_event = { id = WCPE.6 days = 1 }
		#REQUIRED event targets for setting up duel evaluation!
		event_target:target_demon = {
			set_character_flag = flag_duel_no_draws
			save_event_target_as = combatant_2 #the target of the duel...
		}
        ROOT = { save_event_target_as = combatant_1 } #the person issuing the duel...
		set_character_flag = flag_duel_no_draws
		character_event = { id = HFP.10100 days = 1 }
	}
}