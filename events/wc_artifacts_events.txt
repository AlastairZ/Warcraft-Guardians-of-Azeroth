namespace = WCAE

# Got Rare Pepe
character_event = {
	id = WCAE.1
	desc = EVTDESC_WCAE_1
	picture = GFX_evt_lunatic
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes
	
	option = {
		create_character = {
			random_traits = no
			name = "Mrglmargo-Mrglos"
			dynasty = none
			religion = ROOT
			race = murloc
			culture = ROOT
			female = no
			age = 26
			trait = creature_murloc # Murloc = frogs, innit?
			trait = skilled_tactician
			trait = trickster
			trait = flanker
			trait = quick
			trait = strong
			trait = fair
			trait = robust
			trait = groomed
			trait = socializer
			trait = homosexual #Chemicals in the water are turning frogs gay
			trait = lustful
			attributes = {
				martial = 8
			}
		}
		new_character = {
			if = {
				limit = {
					ROOT = {
						trait = creature_murloc
						trait = homosexual
						is_female = no
					}
				}
				add_lover = ROOT
			}
			if = {
				limit = {
					ROOT = {
						culture = pirate_culture
					}
				}
				add_trait = pirate
			}
			if = {
				limit = {
					ROOT = {
						religion_group = light_group
					}
				}
				add_trait = class_paladin_8 # Blue icon = rare
			}
			if = {
				limit = {
					ROOT = {
							religion_group = necromancy_group
					}
				}
				add_trait = class_death_knight_8 # Blue icon = rare
			}
			if = {
				limit = {
					ROOT = {
						NOT = {
							religion_group = light_group
							religion_group = necromancy_group
						}
					}
				}
				add_trait = class_warrior_8 # Blue icon = rare
			}
			add_friend = ROOT
			will_not_marry_effect = yes
		}
		name = EVTOPTA_WCAE_1
	}
}
character_event = {
	id = WCAE.2 #Artifact Up
	desc = {
		trigger = {
			event_target:improved_artifact = {
				has_artifact_flag = leather
			}
		}
		text = EVTDESC_WCAE_2
	}
	desc = {
		trigger = {
			event_target:improved_artifact = {
				NOT = {
					has_artifact_flag = leather
				}
			}
		}
		text = EVTDESC_WCAE_3
	}

	picture = GFX_evt_treasure_chamber
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes

	#immediate = {
	#	any_artifact = {
	#		limit = {
	#			has_artifact_flag = improved_artifact
	#		}
	#		save_event_target_as = improved_artifact
	#		clr_artifact_flag = improved_artifact
	#	}
	#}

	option = { # top_hat to top_hat_2

		trigger = {
			event_target:improved_artifact = {
				artifact_type = top_hat
			}
		}

		random_list = {
			80 = { #success
				custom_tooltip = {
					text = artifact_up_success_tooltip
					add_artifact = top_hat_2
					new_artifact = { copy_artifact_history = event_target:improved_artifact }
					character_event = { id = WCAE.3 }
					event_target:improved_artifact = {
						show_scope_change = no
						clear_event_target = improved_artifact
						clr_artifact_flag = improved_artifact
						destroy_artifact = yes
					}
				}
				modifier = { #Character found a good craftsman
					factor = 1.1
					stewardship >= 15
				}
				modifier = {
					factor = 1.25
					stewardship >= 20
				}
				modifier = {
					factor = 1.5
					stewardship >= 25
				}
				modifier = {
					factor = 1.1
					intrigue >= 15
				}
				modifier = {
					factor = 1.25
					intrigue >= 20
				}
				modifier = {
					factor = 1.5
					intrigue >= 25
				}
				modifier = {
					factor = 1.1
					trait = administrator
				}
				modifier = {
					factor = 1.05
					trait = cynical
				}
				modifier = {
					factor = 1.25
					trait = paranoid
				}
				modifier = {
					factor = 2
					trait = genius
				}
				modifier = {
					factor = 1.5
					trait = quick
				}
				modifier = {
					factor = 1.25
					trait = shrewd
				}
				modifier = {
					factor = 0.75
					trait = dull
				}
				modifier = {
					factor = 0.5
					trait = slow
				}
				modifier = {
					factor = 0.25
					trait = imbecile
				}
				modifier = { #Craftsman will work harder
					factor = 1.025
					trait = just
				}
				modifier = {
					factor = 1.025
					trait = kind
				}
				modifier = {
					factor = 1.025
					trait = charitable
				}
				modifier = {
					factor = 1.025
					trait = temperate
				}
				modifier = {
					factor = 1.025
					trait = humble
				}
				modifier = {
					factor = 1.025
					trait = socializer
				}
				modifier = {
					factor = 1.025
					trait = cruel
				}
				modifier = {
					factor = 1.025
					trait = impaler
				}
			}
			10 = { # minor failure
				custom_tooltip = {
					text = artifact_up_failure_minor_tooltip
					character_event = { id = WCAE.4 }
					event_target:improved_artifact = {
						show_scope_change = no
						clear_event_target = improved_artifact
						clr_artifact_flag = improved_artifact
					}					
				}
				modifier = { #Сharacter found a bad craftsman
					factor = 1.2
					stewardship < 10
				}
				modifier = {
					factor = 1.2
					intrigue < 10
				}
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 0.25
					trait = genius
				}
				modifier = {
					factor = 0.5
					trait = quick
				}
				modifier = {
					factor = 0.75
					trait = shrewd
				}
				modifier = {
					factor = 1.25
					trait = dull
				}
				modifier = {
					factor = 1.5
					trait = slow
				}
				modifier = {
					factor = 2
					trait = imbecile
				}
				modifier = { #Craftsman will work harder
					factor = 0.975
					trait = just
				}
				modifier = {
					factor = 0.975
					trait = kind
				}
				modifier = {
					factor = 0.975
					trait = charitable
				}
				modifier = {
					factor = 0.975
					trait = temperate
				}
				modifier = {
					factor = 0.975
					trait = humble
				}
				modifier = {
					factor = 0.975
					trait = socializer
				}
				modifier = {
					factor = 0.9
					trait = cruel
				}
				modifier = {
					factor = 0.9
					trait = impaler
				}
			}
			5 = { #failure
				custom_tooltip = {
					text = artifact_up_failure_tooltip
					character_event = { id = WCAE.6 }
					event_target:improved_artifact = {
						show_scope_change = no
						clear_event_target = improved_artifact
					}					
				}
				modifier = { #Сharacter found a bad craftsman
					factor = 1.2
					stewardship < 10
				}
				modifier = {
					factor = 1.2
					intrigue < 10
				}
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 0.25
					trait = genius
				}
				modifier = {
					factor = 0.5
					trait = quick
				}
				modifier = {
					factor = 0.75
					trait = shrewd
				}
				modifier = {
					factor = 1.25
					trait = dull
				}
				modifier = {
					factor = 1.5
					trait = slow
				}
				modifier = {
					factor = 2
					trait = imbecile
				}
				modifier = { #Craftsman will work harder
					factor = 0.975
					trait = just
				}
				modifier = {
					factor = 0.975
					trait = kind
				}
				modifier = {
					factor = 0.975
					trait = charitable
				}
				modifier = {
					factor = 0.975
					trait = temperate
				}
				modifier = {
					factor = 0.975
					trait = humble
				}
				modifier = {
					factor = 0.975
					trait = socializer
				}
				modifier = {
					factor = 0.9
					trait = cruel
				}
				modifier = {
					factor = 0.9
					trait = impaler
				}
			}
			5 = { #critical failure
				custom_tooltip = {
					text = artifact_up_critical_failure_tooltip
					character_event = { id = WCAE.5 }
					event_target:improved_artifact = {
						show_scope_change = no
						clear_event_target = improved_artifact
						clr_artifact_flag = improved_artifact
						destroy_artifact = yes
					}
				}
				modifier = { #Fooled by thieves
					factor = 1.2
					stewardship < 8
				}
				modifier = {
					factor = 1.5
					stewardship < 4
				}
				modifier = {
					factor = 1.2
					intrigue < 8
				}
				modifier = {
					factor = 1.5
					intrigue < 4
				}
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 0.25
					trait = genius
				}
				modifier = {
					factor = 0.5
					trait = quick
				}
				modifier = {
					factor = 0.75
					trait = shrewd
				}
				modifier = {
					factor = 1.25
					trait = dull
				}
				modifier = {
					factor = 1.5
					trait = slow
				}
				modifier = {
					factor = 2
					trait = imbecile
				}
				modifier = { #Thieves do not want to steal from you
					factor = 0.9
					trait = just
				}
				modifier = {
					factor = 0.9
					trait = kind
				}
				modifier = {
					factor = 0.9
					trait = charitable
				}
				modifier = {
					factor = 0.95
					trait = temperate
				}
				modifier = {
					factor = 0.95
					trait = humble
				}
				modifier = {
					factor = 0.9
					trait = cruel
				}
				modifier = {
					factor = 0.9
					trait = impaler
				}
				modifier = { #Thieves don't love you
					factor = 1.2
					trait = arbitrary
				}
				modifier = {
					factor = 1.2
					trait = greedy
				}
				modifier = {
					factor = 1.1
					trait = gluttonous
				}
				modifier = {
					factor = 1.1
					trait = hedonist
				}
			}
		}

		name = EVTOPTA_WCAE_4

		ai_chance = {
			factor = 0
			OR = {
				culture = pirate_culture
				culture = blackwater
			}
		}
	}

option = { # top_hat_2 to top_hat_3

		trigger = {
			event_target:improved_artifact = {
				artifact_type = top_hat_2
			}
		}

		random_list = {
			70 = { #success
				custom_tooltip = {
					text = artifact_up_success_tooltip
					add_artifact = top_hat_3
					new_artifact = { copy_artifact_history = event_target:improved_artifact }
					character_event = { id = WCAE.3 }
					event_target:improved_artifact = {
						show_scope_change = no
						clear_event_target = improved_artifact
						clr_artifact_flag = improved_artifact
						destroy_artifact = yes
					}
				}
				modifier = { #Character found a good craftsman
					factor = 1.1
					stewardship >= 15
				}
				modifier = {
					factor = 1.25
					stewardship >= 20
				}
				modifier = {
					factor = 1.5
					stewardship >= 25
				}
				modifier = {
					factor = 1.1
					intrigue >= 15
				}
				modifier = {
					factor = 1.25
					intrigue >= 20
				}
				modifier = {
					factor = 1.5
					intrigue >= 25
				}
				modifier = {
					factor = 1.1
					trait = administrator
				}
				modifier = {
					factor = 1.05
					trait = cynical
				}
				modifier = {
					factor = 1.25
					trait = paranoid
				}
				modifier = {
					factor = 2
					trait = genius
				}
				modifier = {
					factor = 1.5
					trait = quick
				}
				modifier = {
					factor = 1.25
					trait = shrewd
				}
				modifier = {
					factor = 0.75
					trait = dull
				}
				modifier = {
					factor = 0.5
					trait = slow
				}
				modifier = {
					factor = 0.25
					trait = imbecile
				}
				modifier = { #Craftsman will work harder
					factor = 1.025
					trait = just
				}
				modifier = {
					factor = 1.025
					trait = kind
				}
				modifier = {
					factor = 1.025
					trait = charitable
				}
				modifier = {
					factor = 1.025
					trait = temperate
				}
				modifier = {
					factor = 1.025
					trait = humble
				}
				modifier = {
					factor = 1.025
					trait = socializer
				}
				modifier = {
					factor = 1.025
					trait = cruel
				}
				modifier = {
					factor = 1.025
					trait = impaler
				}
			}
			10 = { # minor failure
				custom_tooltip = {
					text = artifact_up_failure_minor_tooltip
					character_event = { id = WCAE.4 }
					event_target:improved_artifact = {
						show_scope_change = no
						clear_event_target = improved_artifact
						clr_artifact_flag = improved_artifact
					}					
				}
				modifier = { #Сharacter found a bad craftsman
					factor = 1.2
					stewardship < 10
				}
				modifier = {
					factor = 1.2
					intrigue < 10
				}
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 0.25
					trait = genius
				}
				modifier = {
					factor = 0.5
					trait = quick
				}
				modifier = {
					factor = 0.75
					trait = shrewd
				}
				modifier = {
					factor = 1.25
					trait = dull
				}
				modifier = {
					factor = 1.5
					trait = slow
				}
				modifier = {
					factor = 2
					trait = imbecile
				}
				modifier = { #Craftsman will work harder
					factor = 0.975
					trait = just
				}
				modifier = {
					factor = 0.975
					trait = kind
				}
				modifier = {
					factor = 0.975
					trait = charitable
				}
				modifier = {
					factor = 0.975
					trait = temperate
				}
				modifier = {
					factor = 0.975
					trait = humble
				}
				modifier = {
					factor = 0.975
					trait = socializer
				}
				modifier = {
					factor = 0.9
					trait = cruel
				}
				modifier = {
					factor = 0.9
					trait = impaler
				}
			}
			10 = { #failure
				custom_tooltip = {
					text = artifact_up_failure_tooltip
					character_event = { id = WCAE.6 }
					event_target:improved_artifact = {
						show_scope_change = no
						clear_event_target = improved_artifact
					}					
				}
				modifier = { #Сharacter found a bad craftsman
					factor = 1.2
					stewardship < 10
				}
				modifier = {
					factor = 1.2
					intrigue < 10
				}
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 0.25
					trait = genius
				}
				modifier = {
					factor = 0.5
					trait = quick
				}
				modifier = {
					factor = 0.75
					trait = shrewd
				}
				modifier = {
					factor = 1.25
					trait = dull
				}
				modifier = {
					factor = 1.5
					trait = slow
				}
				modifier = {
					factor = 2
					trait = imbecile
				}
				modifier = { #Craftsman will work harder
					factor = 0.975
					trait = just
				}
				modifier = {
					factor = 0.975
					trait = kind
				}
				modifier = {
					factor = 0.975
					trait = charitable
				}
				modifier = {
					factor = 0.975
					trait = temperate
				}
				modifier = {
					factor = 0.975
					trait = humble
				}
				modifier = {
					factor = 0.975
					trait = socializer
				}
				modifier = {
					factor = 0.9
					trait = cruel
				}
				modifier = {
					factor = 0.9
					trait = impaler
				}
			}
			10 = { #critical failure
				custom_tooltip = {
					text = artifact_up_critical_failure_tooltip
					character_event = { id = WCAE.5 }
					event_target:improved_artifact = {
						show_scope_change = no
						clear_event_target = improved_artifact
						clr_artifact_flag = improved_artifact
						destroy_artifact = yes
					}
				}
				modifier = { #Fooled by thieves
					factor = 1.2
					stewardship < 8
				}
				modifier = {
					factor = 1.5
					stewardship < 4
				}
				modifier = {
					factor = 1.2
					intrigue < 8
				}
				modifier = {
					factor = 1.5
					intrigue < 4
				}
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 0.25
					trait = genius
				}
				modifier = {
					factor = 0.5
					trait = quick
				}
				modifier = {
					factor = 0.75
					trait = shrewd
				}
				modifier = {
					factor = 1.25
					trait = dull
				}
				modifier = {
					factor = 1.5
					trait = slow
				}
				modifier = {
					factor = 2
					trait = imbecile
				}
				modifier = { #Thieves do not want to steal from you
					factor = 0.9
					trait = just
				}
				modifier = {
					factor = 0.9
					trait = kind
				}
				modifier = {
					factor = 0.9
					trait = charitable
				}
				modifier = {
					factor = 0.95
					trait = temperate
				}
				modifier = {
					factor = 0.95
					trait = humble
				}
				modifier = {
					factor = 0.9
					trait = cruel
				}
				modifier = {
					factor = 0.9
					trait = impaler
				}
				modifier = { #Thieves don't love you
					factor = 1.2
					trait = arbitrary
				}
				modifier = {
					factor = 1.2
					trait = greedy
				}
				modifier = {
					factor = 1.1
					trait = gluttonous
				}
				modifier = {
					factor = 1.1
					trait = hedonist
				}
			}
		}

		name = EVTOPTA_WCAE_4

		ai_chance = {
			factor = 0
			OR = {
				culture = pirate_culture
				culture = blackwater
			}
		}
	}
	
	option = { #Pirate culture

		trigger = {
			OR = {
				culture = pirate_culture
				culture = blackwater
			}
		}

		add_artifact = pirate_admiral_hat
		new_artifact = { copy_artifact_history = event_target:improved_artifact }

		event_target:improved_artifact = {
			show_scope_change = no
			clear_event_target = improved_artifact
			destroy_artifact = yes
		}

		name = EVTOPTA_WCAE_3
	}

#	option = { #Exit
#
#		name = EVT_OPTD_MNM_9310
#		event_target:improved_artifact = {
#			show_scope_change = no
#			clear_event_target = improved_artifact
#		}
#
#		ai_chance = {
#			factor = 0
#		}
#	}
}

#Pings
character_event = { #success
	id = WCAE.3
	desc = EVTDESC_WCAE_7

	picture = GFX_evt_treasure_chamber
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 1
			}
		}
		prestige = 25
		name = EVTOPTA_WCMEME_excellent
	}
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 2
			}
		}
		prestige = 50
		name = EVTOPTA_WCMEME_excellent
	}
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 3
			}
		}
		prestige = 100
		name = EVTOPTA_WCMEME_excellent
	}
}

character_event = { #minor failure
	id = WCAE.4
	desc = EVTDESC_WCAE_5

	picture = GFX_evt_treasure_chamber
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 1
			}
		}
		prestige = -25
	}
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 2
			}
		}
		prestige = -50
	}
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 3
			}
		}
		prestige = -100
	}
}

character_event = { #critical failure
	id = WCAE.5
	desc = EVTDESC_WCAE_4

	picture = GFX_evt_treasure_chamber
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes

	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 1
			}
		}
		prestige = -100
	}
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 2
			}
		}
		prestige = -250
	}
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 3
			}
		}
		prestige = -500
	}
}

character_event = { # failure
	id = WCAE.6
	desc = EVTDESC_WCAE_6

	picture = GFX_evt_treasure_chamber
	border = GFX_event_normal_frame_economy

	is_triggered_only = yes
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 1
			}
		}
		prestige = -50
	}
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 2
			}
		}
		prestige = -100
	}
	option = {
		trigger = {
			event_target:improved_artifact = {
				quality == 3
			}
		}
		prestige = -259
	}
}