namespace = WCSCRFC
namespace = HF
namespace = SSI

character_event = {
	id = WCSCRFC.1

	desc = EVTDESC_WCSCRFC.100
	picture = {
		trigger = { religion = cult_of_hakkar }
		picture = GFX_evt_hakkar
	}
	picture = {
		trigger = { religion = old_gods_worship has_character_modifier = follower_of_cthun }
		picture = GFX_evt_cthun
	}
	picture = {
		trigger = { religion = old_gods_worship has_character_modifier = follower_of_nzoth }
		picture = GFX_evt_nzoth
	}
	picture = {
		trigger = { religion = old_gods_worship has_character_modifier = follower_of_yogg_saron }
		picture = GFX_evt_yogg_saron
	}
	picture = {
		trigger = { religion = old_gods_worship has_character_modifier = follower_of_yshaarj }
		picture = GFX_evt_yshaarj
	}
	picture = {
		trigger = { NOT = { religion = cult_of_hakkar religion = old_gods_worship } }
		picture = GFX_evt_pagan_blood_sacrifice
	}

	notification = yes
	is_triggered_only = yes

	trigger = {
		religion_have_sacrifices_trigger = yes
		FROM = {
			OR = {
				holding_type = city
				holding_type = temple
				holding_type = castle
				holding_type = tribal
			}
		}
	}

	weight_multiplier = {
		modifier = {
			factor = 1.25
			trait = zealous
		}
		modifier = {
			factor = 0.75
			trait = cynical
		}
		modifier = {
			factor = 1.25
			trait = ambitious
		}
		modifier = {
			factor = 0.75
			trait = content
		}
		modifier = {
			factor = 1.25
			trait = cruel
		}
		modifier = {
			factor = 0.75
			trait = kind
		}
	}

	immediate = {
		set_character_flag = wc_calculate_province_population_sacrifice_event_flag
		FROM = {
			location = { sacrifice_province_population_effect = yes }
			if = {
				limit = { settlement_can_be_destroyed_trigger = yes }
				destroy_random_building = THIS
				location = {
					show_scope_change = no
					if = {
						limit = { has_wonder = yes }
						random = {
							chance = 30
							wealth = 100
							wonder = { set_wonder_damaged = yes }
						}
					}
				}
			}
		}
		THIS_get_religious_bonuses_based_on_FROM_LOCATION_num_of_settlements_effect = yes
	}

	option = { name = EVTOPTA_WCSCRFC.100 }

}

character_event = {
	id = SSI.61
	hide_window = yes
	
	ai = yes
	min_age = 16
	prisoner = no
	
	is_triggered_only = yes
	
	trigger = {
		# Warcraft
		can_be_sacrificed_trigger = yes

		in_command = no

		# Warcraft
		NOT = { same_realm = new_character }
		new_character = { religion_have_ritual_sacrifice_trigger = yes }

	}
	
	immediate = {
		liege = {
			character_event = { id = SSI.62 }
		}

		death = { death_reason = death_sacrificed }
	}
	
	option = {
		name = OK
	}
}

character_event = {
	id = SSI.60

	# Warcraft
	desc = { # It is how it should be.
		trigger = { religion_have_ritual_sacrifice_trigger = yes }
		text = EVTDESC_SSI_060_B
	}
	desc = { # How terrible!
		trigger = { religion_have_ritual_sacrifice_trigger = no }
		text = EVTDESCHF23001
	}
	picture = {
		trigger = { event_target:target_sacrificer = { religion = cult_of_hakkar } }
		picture = GFX_evt_hakkar
	}
	picture = {
		trigger = { event_target:target_sacrificer = { religion = old_gods_worship has_character_modifier = follower_of_cthun } }
		picture = GFX_evt_cthun
	}
	picture = {
		trigger = { event_target:target_sacrificer = { religion = old_gods_worship has_character_modifier = follower_of_nzoth } }
		picture = GFX_evt_nzoth
	}
	picture = {
		trigger = { event_target:target_sacrificer = { religion = old_gods_worship has_character_modifier = follower_of_yogg_saron } }
		picture = GFX_evt_yogg_saron
	}
	picture = {
		trigger = { event_target:target_sacrificer = { religion = old_gods_worship has_character_modifier = follower_of_yshaarj } }
		picture = GFX_evt_yshaarj
	}
	picture = {
		trigger = { event_target:target_sacrificer = { NOT = { religion = cult_of_hakkar religion = old_gods_worship } } }
		picture = GFX_evt_pagan_blood_sacrifice
	}

	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes

	# Warcraft
	option = {
		name = { # It is how it should be.
			trigger = { religion_have_ritual_sacrifice_trigger = yes }
			text = EVTOPTB_SSI_060
		}
		name = { # How terrible!
			trigger = { religion_have_ritual_sacrifice_trigger = no }
			text = EVTOPTAHF23001
		}
	}

}

# Liege Informed of Sacrifice
character_event = {
	id = SSI.62

	# Warcraft
	desc = { # It is how it should be.
		trigger = { religion_have_ritual_sacrifice_trigger = yes }
		text = EVTDESC_SSI_060_B
	}
	desc = { # How terrible!
		trigger = { religion_have_ritual_sacrifice_trigger = no }
		text = EVTDESCHF23001
	}
	picture = GFX_evt_pagan_blood_sacrifice

	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes

	# Warcraft
	option = {
		name = { # It is how it should be.
			trigger = { religion_have_ritual_sacrifice_trigger = yes }
			text = EVTOPTB_SSI_060
		}
		name = { # How terrible!
			trigger = { religion_have_ritual_sacrifice_trigger = no }
			text = EVTOPTAHF23001
		}
	}

}

# Ritual Sacrifice Prisoner
character_event = {
	id = HF.23001
	desc = EVTDESCHF23001
	
	picture = GFX_evt_pagan_blood_sacrifice
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAHF23001
	}
}

# Ritual Sacrifice Prisoner (Jailer's perspective)
character_event = {
	id = HF.23002

	# Warcraft
	desc = {
		trigger = {
			trigger_if = {
				limit = { religion = old_gods_worship }

				is_shadow_priest_class_trigger = no
				NOT = {
					any_realm_wonder_upgrade = {
						has_wonder_upgrade = upgrade_twilight_altar
						is_active = yes
					}
				}
			}
			trigger_else ={
				NOR = {
					trait = bloodthirsty_gods_1
					trait = bloodthirsty_gods_2
					trait = bloodthirsty_gods_3
				}
				NOT = {
					any_realm_wonder_upgrade = {
						has_wonder_upgrade = upgrade_sacrificial_altar
						is_active = yes
					}
				}
			}
		}

		text = EVTDESCHF23002
	}
	desc = {
		trigger = {
			trigger_if = {
				limit = { religion = old_gods_worship }

				is_shadow_priest_class_trigger = yes
				NOT = {
					any_realm_wonder_upgrade = {
						has_wonder_upgrade = upgrade_twilight_altar
						is_active = yes
					}
				}
			}
			trigger_else ={
				OR = {
					trait = bloodthirsty_gods_1
					trait = bloodthirsty_gods_2
					trait = bloodthirsty_gods_3
				}
				NOT = {
					any_realm_wonder_upgrade = {
						has_wonder_upgrade = upgrade_sacrificial_altar
						is_active = yes
					}
				}
			}
		}

		text = EVTDESCHF23002_B 	#Do it yourself.
	}
	desc = {
		trigger = {
			trigger_if = {
				limit = { religion = old_gods_worship }

				is_shadow_priest_class_trigger = no
				any_realm_wonder_upgrade = {
					has_wonder_upgrade = upgrade_twilight_altar
					is_active = yes
				}
			}
			trigger_else ={
				NOR = {
					trait = bloodthirsty_gods_1
					trait = bloodthirsty_gods_2
					trait = bloodthirsty_gods_3
				}
				any_realm_wonder_upgrade = {
					has_wonder_upgrade = upgrade_sacrificial_altar
					is_active = yes
				}
			}
		}

		text = EVTDESCHF23002_C
	}
	desc = {
		trigger = {
			trigger_if = {
				limit = { religion = old_gods_worship }

				is_shadow_priest_class_trigger = yes
				any_realm_wonder_upgrade = {
					has_wonder_upgrade = upgrade_twilight_altar
					is_active = yes
				}
			}
			trigger_else ={
				OR = {
					trait = bloodthirsty_gods_1
					trait = bloodthirsty_gods_2
					trait = bloodthirsty_gods_3
				}
				any_realm_wonder_upgrade = {
					has_wonder_upgrade = upgrade_sacrificial_altar
					is_active = yes
				}
			}
		}

		text = EVTDESCHF23002_D 	#Do it yourself.
	}
	
	# Warcraft
	picture = {
		trigger = { religion = cult_of_hakkar }
		picture = GFX_evt_hakkar
	}
	picture = {
		trigger = { religion = old_gods_worship has_character_modifier = follower_of_cthun }
		picture = GFX_evt_cthun
	}
	picture = {
		trigger = { religion = old_gods_worship has_character_modifier = follower_of_nzoth }
		picture = GFX_evt_nzoth
	}
	picture = {
		trigger = { religion = old_gods_worship has_character_modifier = follower_of_yogg_saron }
		picture = GFX_evt_yogg_saron
	}
	picture = {
		trigger = { religion = old_gods_worship has_character_modifier = follower_of_yshaarj }
		picture = GFX_evt_yshaarj
	}
	picture = {
		trigger = { NOT = { religion = cult_of_hakkar religion = old_gods_worship } }
		picture = GFX_evt_pagan_blood_sacrifice
	}

	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes

	immediate = {
		random_realm_wonder_upgrade = {
			limit = {

				# Warcraft
				trigger_if = {
					limit = { PREV = { religion = old_gods_worship } }

					has_wonder_upgrade = upgrade_twilight_altar
				}
				trigger_else = { has_wonder_upgrade = upgrade_sacrificial_altar }

				is_active = yes
			}
			save_event_target_as = the_sacrificial_altar
			wonder = { save_event_target_as = the_temple }
		}
	}
	
	option = {

		# Warcraft
		name = EVTOPTA_SSI_072

		if = {

			# Warcraft
			limit = { event_target:the_sacrificial_altar = { is_active = yes } }

			prestige = 10
		}
	}

	option = {
		name = EVTOPTBHF23002
		trigger = {

			# Warcraft
			event_target:target_sacrificed_prisoner = { can_be_eaten_trigger = yes }
			event_target:the_sacrificial_altar = { is_active = yes }

		}
		tooltip_info_custom = EVTOPTBHF23002_TT
		
		# Warcraft
		if = {
			limit = { NOT = { trait = cannibal_trait } }
			add_trait = cannibal_trait
		}

		add_character_modifier = {
			name = ate_beating_heart
			months = 6
		}
	}


	after = {

		# Warcraft - offmap OG currency
		tooltip = { add_offmap_old_gods_currency_insanity_after_calculation_effect = yes }

	}
}
