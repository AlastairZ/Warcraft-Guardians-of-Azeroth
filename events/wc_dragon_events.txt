namespace = WCDRA

# Dragon ages
character_event = {
	id = WCDRA.150
	desc = {
		trigger = {
			NOT = { age = 1 }
			is_whelp_trigger = no
			is_drake_trigger = no
			is_dragon_trigger = no
			is_wyrm_trigger = no
		}
		text = EVTDESC_WCDRA_150_whelp
	}
	desc = {
		trigger = {
			age = 1
			NOT = { age = 100 }
			is_drake_trigger = no
			is_dragon_trigger = no
			is_wyrm_trigger = no
		}
		text = EVTDESC_WCDRA_150_drake
	}
	desc = {
		trigger = {
			age = 100
			NOT = { age = 500 }
			is_dragon_trigger = no
			is_wyrm_trigger = no
		}
		text = EVTDESC_WCDRA_150_dragon
	}
	desc = {
		trigger = {
			age = 500
			is_wyrm_trigger = no
		}
		text = EVTDESC_WCDRA_150_wyrm
	}
	picture = GFX_evt_dragons_egg

	is_triggered_only = yes

	trigger = {
		is_alive = yes
		is_dying = no
		
		has_dragon_gfx_trigger = yes
		OR = {
			AND = {
				NOT = { age = 1 }
				is_whelp_trigger = no
				is_drake_trigger = no
				is_dragon_trigger = no
				is_wyrm_trigger = no
			}
			AND = {
				age = 1
				NOT = { age = 100 }
				is_drake_trigger = no
				is_dragon_trigger = no
				is_wyrm_trigger = no
			}
			AND = {
				age = 100
				NOT = { age = 500 }
				is_dragon_trigger = no
				is_wyrm_trigger = no
			}
			AND = {
				age = 500
				is_wyrm_trigger = no
			}
		}
	}
	option = {
		name = RAWR

		remove_racial_traits_effect = yes
		if = {
			limit = {
				NOT = { age = 1 }
				is_whelp_trigger = no
				is_drake_trigger = no
				is_dragon_trigger = no
				is_wyrm_trigger = no
			}
			if = {
				limit = { graphical_culture = dragonredgfx }
				add_trait = creature_red_whelp
			}
			if = {
				limit = { graphical_culture = dragonbluegfx }
				add_trait = creature_blue_whelp
			}
			if = {
				limit = { graphical_culture = dragongreengfx }
				add_trait = creature_green_whelp
			}
			if = {
				limit = { graphical_culture = dragonblackgfx }
				add_trait = creature_black_whelp
			}
			if = {
				limit = { graphical_culture = dragonbronzegfx }
				add_trait = creature_bronze_whelp
			}
			if = {
				limit = { graphical_culture = dragoninfinitegfx }
				add_trait = creature_infinite_whelp
			}
			# break = yes
		}
		if = {
			limit = {
				age = 1
				NOT = { age = 100 }
				is_drake_trigger = no
				is_dragon_trigger = no
				is_wyrm_trigger = no
			}
			if = {
				limit = { graphical_culture = dragonredgfx }
				add_trait = creature_red_drake
			}
			if = {
				limit = { graphical_culture = dragonbluegfx }
				add_trait = creature_blue_drake
			}
			if = {
				limit = { graphical_culture = dragongreengfx }
				add_trait = creature_green_drake
			}
			if = {
				limit = { graphical_culture = dragonblackgfx }
				add_trait = creature_black_drake
			}
			if = {
				limit = { graphical_culture = dragonbronzegfx }
				add_trait = creature_bronze_drake
			}
			if = {
				limit = { graphical_culture = dragoninfinitegfx }
				add_trait = creature_infinite_drake
			}
			# break = yes
		}
		if = {
			limit = {
				age = 100
				NOT = { age = 500 }
				is_dragon_trigger = no
				is_wyrm_trigger = no
			}
			if = {
				limit = { graphical_culture = dragonredgfx }
				add_trait = creature_red_dragon
			}
			if = {
				limit = { graphical_culture = dragonbluegfx }
				add_trait = creature_blue_dragon
			}
			if = {
				limit = { graphical_culture = dragongreengfx }
				add_trait = creature_green_dragon
			}
			if = {
				limit = { graphical_culture = dragonblackgfx }
				add_trait = creature_black_dragon
			}
			if = {
				limit = { graphical_culture = dragonbronzegfx }
				add_trait = creature_bronze_dragon
			}
			if = {
				limit = { graphical_culture = dragoninfinitegfx }
				add_trait = creature_infinite_dragon
			}
			# break = yes
		}
		if = {
			limit = {
				age = 500
				is_wyrm_trigger = no
			}
			if = {
				limit = { graphical_culture = dragonredgfx }
				add_trait = creature_red_wyrm
			}
			if = {
				limit = { graphical_culture = dragonbluegfx }
				add_trait = creature_blue_wyrm
			}
			if = {
				limit = { graphical_culture = dragongreengfx }
				add_trait = creature_green_wyrm
			}
			if = {
				limit = { graphical_culture = dragonblackgfx }
				add_trait = creature_black_wyrm
			}
			if = {
				limit = { graphical_culture = dragonbronzegfx }
				add_trait = creature_bronze_wyrm
			}
			if = {
				limit = { graphical_culture = dragoninfinitegfx }
				add_trait = creature_infinite_wyrm
			}
		}
	}
}

# ROOT inherits FROMFROM's aspect trait
character_event = {
	id = WCDRA.160

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		is_dragon_race_trigger = yes
		OR = {
			AND = {
				religion = sect_of_the_dragons
				FROMFROM = {
					OR = {
						trait = aspect_of_nature
						trait = aspect_of_life
						trait = aspect_of_magic
						trait = aspect_of_time
					}
				}
			}
			AND = {
				religion = old_gods_worship
				FROMFROM = { trait = aspect_of_death }
			}
		}
		higher_tier_than = FROMFROM
		primary_title = { title = FROM }
	}

	immediate = {
		log = "WCDRA.160 fired for [Root.GetBestName]"

		FROMFROM = {
			trigger_switch = {
				on_trigger = trait
				aspect_of_nature = { ROOT = { add_trait = aspect_of_nature } }
				aspect_of_death = { ROOT = { add_trait = aspect_of_death } }
				aspect_of_life = { ROOT = { add_trait = aspect_of_life } }
				aspect_of_magic = { ROOT = { add_trait = aspect_of_magic } }
				aspect_of_time = { ROOT = { add_trait = aspect_of_time } }
			}
		}
	}
}