namespace = WCTAR

# Start of the Gathering
narrative_event = {
	id = WCTAR.100
	title = EVTTITLE_WCTAR_100
	desc = EVTDESC_WCTAR_100
	picture = GFX_evt_tauren_gathering
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = hosting_tauren
		clr_global_flag = gathering_event_hosted
		set_global_flag = gathering_event_hosted
	}
	
	option = {
		name = EVTOPTA_WCTAR_100
		
		any_character = {
			limit = {
				is_ruler = yes
				OR = {
					independent = yes
					is_tributary = yes
				}
				trait = creature_tauren
				NOT = { character = ROOT }
			}
			character_event = { id = WCTAR.101 days = 10 random = 25 }
		}
	}
	
	after = {
		character_event = { id = WCTAR.104 years = 1 }
	}
}

#Invitation received
letter_event = {
	id = WCTAR.101
	desc = EVTDESC_WCTAR_101
	portrait = event_target:hosting_tauren
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = tauren_with_letter
	}
	
	#Accept invitation
	option = {
		name = EVTOPTA_WCTAR_101
		ai_chance = {
			factor = 10
		}
		set_character_flag = accepted_invitation
		opinion = { modifier = accepted_gathering_invitation who = event_target:hosting_tauren years = 8 } 
		event_target:hosting_tauren = { character_event = { id = WCTAR.102 month = 1 random = 15 } }
	}
	
	#Refuse Invitation	
	option = {
		name = EVTOPTB_WCTAR_101
		ai_chance = {
			factor = 0
		}
		opinion = { modifier = refused_gathering_invitation who = event_target:hosting_tauren years = 8 } 
	}
}

#Invitation return positive
letter_event = {
	id = WCTAR.102
	desc = EVTDESC_WCTAR_102
	portrait = event_target:tauren_with_letter
	
	is_triggered_only = yes
	
	#Great Options
	option = {
		name = EVTOPTA_WCTAR_102
		
		opinion = { modifier = accepted_gathering_invitation who = event_target:tauren_with_letter years = 8 } 
	}
}

#Start of the Gathering
narrative_event = {
	id = WCTAR.104
	title = EVTTITLE_WCTAR_100
	desc = EVTDESC_WCTAR_104
	picture = GFX_evt_tauren_gathering
	
	is_triggered_only = yes
	
	immediate = {
		save_event_target_as = hosting_tauren
	}
	
	option = {
		name = EVTOPTA_WCTAR_104
		any_character = {
			limit = { has_character_flag = accepted_invitation }
			character_event = { id = WCTAR_105 }
		}
		set_character_flag = joint_host_tauren_coalition
	}
	option = {
		name = EVTOPTB_WCTAR_104
	}
	option = {
		name = EVTOPTC_WCTAR_104
	}
	option = {
		name = EVTOPTD_WCTAR_104
	}
}

#Invitation received coalition
letter_event = {
	id = WCTAR.105
	desc = EVTDESC_WCTAR_105
	portrait = event_target:hosting_tauren
	
	is_triggered_only = yes
	
	immediate = {
	}
	
	#Accept invitation
	option = {
		name = EVTOPTA_WCTAR_105
		ai_chance = {
			factor = 10
		}
		set_character_flag = accepted_invitation
		opinion = { modifier = accepted_gathering_invitation who = event_target:hosting_tauren years = 8 } 
		event_target:hosting_tauren = { character_event = { id = WCTAR.106 days = 1 random = 4} }
		set_character_flag = joint_gathering_event
	}
	
	#Refuse Invitation	
	option = {
		name = EVTOPTB_WCTAR_105
		ai_chance = {
			factor = 0
		}
		opinion = { modifier = refused_gathering_invitation who = event_target:hosting_tauren years = 8 } 
	}
}

#Coalition Return positive
letter_event = {
	id = WCTAR.106
	desc = EVTDESC_WCTAR_106
	portrait = event_target:tauren_with_letter
	
	is_triggered_only = yes
	
	#Great Options
	option = {
		name = EVTOPTA_WCTAR_106
	}
}